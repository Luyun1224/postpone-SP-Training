<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥‡ç¾é†«é™¢ SP å±•å»¶åŸ¹è¨“æˆæœå„€è¡¨æ¿</title>
    
    <!-- 1. è¼‰å…¥ Tailwind CSS (æ¨£å¼) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. è¼‰å…¥å­—å‹ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- 3. React å’Œ ReactDOM (æ ¸å¿ƒ) -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- 4. Babel (ç·¨è­¯å™¨) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 5. Recharts (åœ–è¡¨åº«) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/classnames/2.3.2/index.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js"></script>

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .font-handwriting { font-family: 'Caveat', 'Noto Sans TC', cursive; font-weight: 500; }
        .text-shadow-lg { text-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
        
        /* ç‡ˆç®±æ¨£å¼ */
        .lightbox-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.95); z-index: 9999;
            display: flex; align-items: center; justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .lightbox-image { max-width: 85vw; max-height: 85vh; object-fit: contain; border-radius: 8px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
        .lightbox-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
            z-index: 10000;
        }
        .lightbox-btn {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            padding: 12px 16px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            color: #1f2937;
        }
        .lightbox-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        /* ç…§ç‰‡ç‰†æ¨£å¼ - æ¸›å°‘ç•™ç™½ï¼Œå¢åŠ å¯†åº¦ */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 0.75rem;
        }
        .photo-item {
            aspect-ratio: 4/3;
            border-radius: 0.5rem;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .photo-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* å½±ç‰‡å¡ç‰‡æ¨£å¼ */
        .video-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .video-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        .video-thumbnail {
            position: relative;
            padding-top: 56.25%; /* 16:9 æ¯”ä¾‹ */
            background: #f3f4f6;
            overflow: hidden;
        }
        .video-thumbnail iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .video-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(220, 38, 38, 0.95);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 4px;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        
        // --- Recharts å®‰å…¨è¼‰å…¥ ---
        const RechartsObj = window.Recharts || {};
        const { 
            LineChart = () => null, Line = () => null, 
            XAxis = () => null, YAxis = () => null, 
            CartesianGrid = () => null, Tooltip = () => null, 
            Legend = () => null, ResponsiveContainer = ({children}) => <div>{children}</div>, 
            RadarChart = () => null, PolarGrid = () => null, 
            PolarAngleAxis = () => null, PolarRadiusAxis = () => null, Radar = () => null,
            BarChart = () => null, Bar = () => null, Cell = () => null
        } = RechartsObj; 
        const isRechartsLoaded = !!window.Recharts;

        // --- åœ–ç¤ºçµ„ä»¶ ---
        const Icon = ({ children, className, size = 24, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const Heart = (props) => <Icon {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></Icon>;
        const Users = (props) => <Icon {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></Icon>;
        const Target = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></Icon>;
        const TrendingUp = (props) => <Icon {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></Icon>;
        const ArrowRight = (props) => <Icon {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>;
        const BrainCircuit = (props) => <Icon {...props}><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M9 13a4.5 4.5 0 0 0 3-4"/><path d="M6.003 5.125A3 3 0 0 0 13.933 5"/><path d="M12 18a6 6 0 0 0-9-5"/><path d="M20 10a3 3 0 1 1-5.997-.125 4 4 0 0 1 2.526-5.77 4 4 0 0 1-.556-6.588A4 4 0 1 1 12 2Z"/><path d="M15 11a4.5 4.5 0 0 1-3 4"/><path d="M17.997 18.875A3 3 0 0 1 10.067 19"/><path d="M12 6a6 6 0 0 1 9 5"/></Icon>;
        const Sparkles = (props) => <Icon {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M19 19H15"/><path d="M19 15v4"/></Icon>;
        const Quote = (props) => <Icon {...props}><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/></Icon>;
        const Loader2 = (props) => <Icon {...props}><path d="M21 12a9 9 0 1 1-6.219-8.56"/></Icon>;
        // æ–°å¢ Activity åœ–ç¤ºç”¨æ–¼ç”Ÿç†è¡¨ç¾
        const Activity = (props) => <Icon {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></Icon>;

        // --- çµ„ä»¶ ---
        
        const Header = ({ count }) => {
            const totalParticipants = 20; // ç¸½åƒèˆ‡äººæ•¸ (å›ºå®š)
            const responseRate = Math.round((count / totalParticipants) * 100);

            return (
                <header className="relative bg-slate-900 text-white overflow-hidden pb-24 pt-16 px-6 min-h-[680px]">
                    {/* èƒŒæ™¯èˆ‡é®ç½© */}
                    <div className="absolute inset-0 z-0 bg-cover bg-center opacity-40" style={{backgroundImage: "url('https://raw.githubusercontent.com/Luyun1224/postpone-SP-Training/main/IMG_2520.JPG')", filter: "grayscale(30%)"}}></div>
                    <div className="absolute inset-0 z-0 bg-gradient-to-b from-slate-900/80 via-slate-900/70 to-slate-900"></div>

                    <div className="max-w-6xl mx-auto relative z-10">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-end mb-12">
                            <div>
                                <div className="flex items-center gap-3 mb-6">
                                    <span className="bg-green-600 text-white px-4 py-2 rounded-full text-sm font-bold tracking-wider shadow-lg shadow-green-500/30">å¥‡ç¾é†«é™¢</span>
                                    <span className="text-green-300 font-bold text-base tracking-wide">è‡¨åºŠæŠ€èƒ½ä¸­å¿ƒ</span>
                                </div>
                                <h1 className="text-4xl md:text-6xl font-black text-white mb-6 tracking-tight text-shadow-lg leading-tight">
                                    æ¨™æº–åŒ–ç—…äºº<span className="text-green-400">å±•å»¶</span>åŸ¹è¨“å·¥ä½œåŠ
                                </h1>
                                
                                <div className="flex flex-wrap gap-6 text-sm md:text-base text-gray-300 mb-8">
                                    <div className="flex items-center gap-2">
                                        <div className="p-1 bg-white/10 rounded"><Users size={16} /></div>
                                        <span>å¸«è³‡é™£å®¹ï¼šé¦¬å•ç´€å¿µé†«é™¢ ç‹æ˜æ·‘æŠ€è¡“ä¸»ä»»ã€ç‹éƒé›¯ç®¡ç†å¸«</span>
                                    </div>
                                    {/* è¨“ç·´å¸«éƒ¨åˆ†å·²ç§»é™¤ */}
                                </div>

                                <div className="flex flex-wrap gap-4 text-xl md:text-2xl font-bold text-green-200/90 tracking-widest mt-2">
                                    <span>ç²¾æº–æ ¡æº–</span>
                                    <span className="text-white/40">x</span>
                                    <span>å›°å¢ƒæ‡‰å°</span>
                                    <span className="text-white/40">x</span>
                                    <span>å³èˆˆæ¼”ç·´</span>
                                </div>
                            </div>

                            {/* æ•¸æ“šå¡ç‰‡ */}
                            <div className="mt-8 md:mt-0 flex gap-4">
                                <div className="bg-white/10 backdrop-blur-md p-5 rounded-2xl border border-white/10 text-center min-w-[120px]">
                                    <div className="text-4xl font-black text-white">{count}</div>
                                    <div className="text-white/70 text-sm mt-1 font-bold">å•å·å›æ”¶</div>
                                </div>
                                <div className="bg-green-600/20 backdrop-blur-md p-5 rounded-2xl border border-green-500/30 text-center min-w-[120px] relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-1 h-full bg-green-500"></div>
                                    <div className="text-4xl font-black text-green-400">{responseRate}%</div>
                                    <div className="text-green-200/70 text-sm mt-1 font-bold">å›æ”¶ç‡ (N={totalParticipants})</div>
                                </div>
                            </div>
                        </div>

                        {/* ç†è«–æ¶æ§‹ - é‡å° 11/29 èª²ç¨‹è¡¨å…§å®¹é‡æ–°è¨­è¨ˆ */}
                        <div className="grid md:grid-cols-3 gap-6 mt-16 border-t border-white/10 pt-10">
                            {/* Card 1: ç—›è‹¦è¾¨è­˜ (09:35-10:35) */}
                            <div className="bg-white/5 backdrop-blur-sm p-6 rounded-2xl border border-white/5 hover:bg-white/10 transition-colors">
                                <div className="flex items-center gap-3 mb-3">
                                    <div className="p-2 bg-yellow-500/20 rounded-lg text-yellow-400"><Activity size={22} /></div>
                                    <h3 className="font-bold text-lg text-yellow-100">ç—›è‹¦ç‰¹å¾µè¾¨è­˜</h3>
                                </div>
                                <p className="text-sm text-gray-400 leading-relaxed">
                                    é‡å°<span className="text-yellow-400 font-bold">å‘¼å¸å›°é›£ã€è…¹ç—›ã€éª¨æŠ˜</span>ç­‰ç‰¹å®šæƒ…å¢ƒï¼Œç²¾æº–è§£æç—…æ‚£çš„ç”Ÿç†ç‰¹å¾µèˆ‡è‚¢é«”èªè¨€ã€‚
                                </p>
                            </div>
                            
                            {/* Card 2: å›°å¢ƒè¨è«– (09:05) */}
                            <div className="bg-white/5 backdrop-blur-sm p-6 rounded-2xl border border-white/5 hover:bg-white/10 transition-colors">
                                <div className="flex items-center gap-3 mb-3">
                                    <div className="p-2 bg-blue-500/20 rounded-lg text-blue-400"><BrainCircuit size={22} /></div>
                                    <h3 className="font-bold text-lg text-blue-100">å›°å¢ƒç¶“é©—å¾©ç›¤</h3>
                                </div>
                                <p className="text-sm text-gray-400 leading-relaxed">
                                    é€éå°çµ„è¨è«–å›é¡§éå¾€æ¼”å‡ºæŒ‘æˆ°ï¼Œå°‡<span className="text-blue-400 font-bold">å°è±¡æ·±åˆ»çš„å›°é›£ç¶“é©—</span>è½‰åŒ–ç‚ºå…·é«”çš„æ‡‰å°ç­–ç•¥ã€‚
                                </p>
                            </div>

                            {/* Card 3: å³èˆˆæ¼”å‡º (10:55) */}
                            <div className="bg-white/5 backdrop-blur-sm p-6 rounded-2xl border border-white/5 hover:bg-white/10 transition-colors">
                                <div className="flex items-center gap-3 mb-3">
                                    <div className="p-2 bg-green-500/20 rounded-lg text-green-400"><Sparkles size={22} /></div>
                                    <h3 className="font-bold text-lg text-green-100">å³èˆˆå¼•å°æ¼”ç·´</h3>
                                </div>
                                <p className="text-sm text-gray-400 leading-relaxed">
                                    é‹ç”¨<span className="text-green-400 font-bold">å³èˆˆæ¼”å‡º (Improv)</span> æ¨¡æ“¬çœŸå¯¦æƒ…å¢ƒï¼Œè¨“ç·´åœ¨å±•ç¾æƒ…ç·’çš„åŒæ™‚å¼•å°å­¸å“¡é—œæ³¨æ„Ÿå—ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                </header>
            );
        };

        const InsightsSection = ({ avgData }) => {
            if (!avgData) return null;

            // æ ¹æ“šå±•å»¶å•å·é¡Œç›®å®šç¾©æ ¸å¿ƒèƒ½åŠ›
            const competencies = [
                { name: 'åŠ‡æœ¬æº–ç¢ºåº¦', score: Number(avgData.q4), icon: 'ğŸ“–', desc: 'åŠ‡æœ¬æ ¡æº–' },
                { name: 'æ¼”å‡ºæ¨™æº–åŒ–', score: Number(avgData.q5), icon: 'ğŸ­', desc: 'ä¸€è‡´æ€§' },
                { name: 'èº«å¿ƒèª¿é©', score: Number(avgData.q6), icon: 'ğŸ§˜', desc: 'ç‹€æ…‹ç¶­æŒ' },
                { name: 'å›é¥‹å®¢è§€æ€§', score: Number(avgData.q7), icon: 'âš–ï¸', desc: 'å®¢è§€äº‹å¯¦' },
                { name: 'å›é¥‹é‡é»', score: Number(avgData.q8), icon: 'ğŸ¯', desc: 'æ™‚æ©ŸæŒæ¡' },
            ];
            const topCompetency = competencies.reduce((prev, current) => (prev.score > current.score) ? prev : current);
            const avgCompetency = (competencies.reduce((sum, c) => sum + c.score, 0) / competencies.length).toFixed(2);

            return (
                <div className="bg-white py-12 px-6 border-b border-gray-100">
                    <div className="max-w-7xl mx-auto">
                        <h2 className="text-4xl font-black text-gray-800 mb-10 flex items-center">
                            <span className="w-3 h-12 bg-green-600 mr-4 rounded-full"></span>
                            å±•å»¶æˆæ•ˆæ·±åº¦æ´å¯Ÿ
                            <span className="ml-4 text-base font-bold text-gray-500 bg-gray-100 px-4 py-2 rounded-full border border-gray-200 flex items-center gap-2">
                                <Sparkles size={14} className="text-green-600"/> æ•¸æ“šåˆ†æ
                            </span>
                        </h2>

                        <div className="grid md:grid-cols-3 gap-6 mb-8">
                            {/* å°ˆæ¥­èªåŒåˆ†æ (Q10) */}
                            <div className="bg-gradient-to-br from-indigo-50 to-white p-7 rounded-3xl border-2 border-indigo-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-5">
                                    <div className="p-3 bg-indigo-100 text-indigo-600 rounded-xl"><Heart size={24} /></div>
                                    <h3 className="text-xl font-black text-gray-800">å°ˆæ¥­åƒ¹å€¼èªåŒ</h3>
                                </div>
                                <div className="mb-5 flex items-baseline gap-2">
                                    <div className="text-4xl font-black text-indigo-600">{avgData.q10}</div>
                                    <div className="text-gray-600 text-base font-bold">/ 5.0</div>
                                </div>
                                <div className="space-y-3">
                                    <div className="flex gap-2 items-start">
                                        <div className="mt-1"><ArrowRight size={16} className="text-indigo-400" /></div>
                                        <p className="text-gray-700 leading-relaxed text-sm font-medium">
                                            å­¸å“¡é«˜åº¦èªåŒ SP è§’è‰²åƒ¹å€¼ï¼Œå¾ã€Œå…¼è·ã€å¿ƒæ…‹è½‰åŒ–ç‚ºã€Œæ•™è‚²å¤¥ä¼´ã€ã€‚
                                        </p>
                                    </div>
                                    <div className="flex gap-2 items-start">
                                        <div className="mt-1"><ArrowRight size={16} className="text-indigo-400" /></div>
                                        <p className="text-gray-700 leading-relaxed text-sm font-medium">
                                            Q11 æŒçºŒå­¸ç¿’å‹•åŠ›é” <span className="font-black">{avgData.q11}</span> åˆ†ï¼Œå±•ç¾å°æœªä¾†ä¸‰å¹´çš„æ‰¿è«¾ã€‚
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* æ ¸å¿ƒèƒ½åŠ›åˆ†æ */}
                            <div className="bg-gradient-to-br from-green-50 to-white p-7 rounded-3xl border-2 border-green-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-5">
                                    <div className="p-3 bg-green-100 text-green-600 rounded-xl"><BrainCircuit size={24} /></div>
                                    <h3 className="text-xl font-black text-gray-800">å±•å»¶æ ¸å¿ƒæŒ‡æ¨™</h3>
                                </div>
                                <div className="mb-5">
                                    <div className="text-xs font-black text-gray-500 mb-2 uppercase tracking-wider">æœ€å¼·èƒ½åŠ›</div>
                                    <div className="text-xl font-black text-green-600 flex items-center gap-2">
                                        <span className="text-2xl">{topCompetency.icon}</span> 
                                        <span>{topCompetency.name}</span>
                                        <span className="text-lg bg-green-100 px-3 py-1 rounded-full">{topCompetency.score.toFixed(1)}</span>
                                    </div>
                                </div>
                                <div className="space-y-3">
                                    <div className="flex gap-2 items-start">
                                        <div className="mt-1"><ArrowRight size={16} className="text-green-400" /></div>
                                        <p className="text-gray-700 leading-relaxed text-sm font-medium">
                                            äº”å¤§é€²éšæŒ‡æ¨™å¹³å‡é” <span className="font-black text-green-600 text-base">{avgCompetency}</span> åˆ†ï¼Œé¡¯ç¤ºæ ¡æº–è¨“ç·´æˆåŠŸã€‚
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* è©é›²åˆ†æ */}
                            <div className="bg-gradient-to-br from-amber-50 to-white p-7 rounded-3xl border-2 border-amber-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-5">
                                    <div className="p-3 bg-amber-100 text-amber-600 rounded-xl"><Sparkles size={24} /></div>
                                    <h3 className="text-xl font-black text-gray-800">é—œéµè©é »</h3>
                                </div>
                                <div className="flex flex-wrap gap-3 justify-center items-center h-36 content-center">
                                    <span className="bg-amber-100 text-amber-800 px-4 py-2 rounded-full text-base font-black">å®¢è§€å›é¥‹</span>
                                    <span className="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold">æ¨™æº–åŒ–</span>
                                    <span className="bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-lg font-black">é‡æ–°æ ¡æº–</span>
                                    <span className="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-bold">åŠ‡æœ¬ç´°ç¯€</span>
                                    <span className="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold">ä¸å¸¶æƒ…ç·’</span>
                                </div>
                                <div className="mt-5 pt-4 border-t-2 border-amber-100">
                                    <p className="text-sm text-gray-700 leading-relaxed text-center font-medium">
                                        å­¸å“¡å›é¥‹é›†ä¸­æ–¼ã€Œå®¢è§€æ€§ã€èˆ‡ã€Œç´°ç¯€æ ¡æº–ã€ï¼Œç¬¦åˆå±•å»¶èª²ç¨‹ç›®æ¨™ã€‚
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* è¡Œæ”¿èˆ‡æ¨è–¦åº¦å€å¡Š */}
                        <div className="grid md:grid-cols-2 gap-6">
                            <div className="bg-white border-2 border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex justify-between items-center mb-4">
                                    <div>
                                        <h4 className="font-bold text-gray-600 mb-1">è¡Œæ”¿èˆ‡æ•™å­¸æ»¿æ„åº¦</h4>
                                        <p className="text-xs text-gray-400">Q1-Q3 å¹³å‡</p>
                                    </div>
                                    <div className="text-3xl font-black text-gray-800">
                                        {((Number(avgData.q1) + Number(avgData.q2) + Number(avgData.q3))/3).toFixed(1)}
                                    </div>
                                </div>
                                <div className="pt-4 border-t border-gray-100">
                                    <p className="text-sm text-gray-600 leading-relaxed font-medium">
                                        <span className="text-green-600 font-bold">ğŸ’¡ æ•¸æ“šæ´å¯Ÿï¼š</span><br/>
                                        é«˜åˆ†åæ˜ å‡ºè¡Œæ”¿æµç¨‹çš„é †æš¢èˆ‡å¸«è³‡å®‰æ’çš„å°ˆæ¥­æ€§ï¼Œå­¸å“¡å°æ–¼èª²ç¨‹ç¯€å¥èˆ‡å¾Œå‹¤æ”¯æ´çµ¦äºˆé«˜åº¦è‚¯å®šï¼Œé¡¯ç¤ºæ•™å­¸è¨­è¨ˆæˆåŠŸå…¼é¡§äº†æ•ˆç‡èˆ‡å“è³ªã€‚
                                    </p>
                                </div>
                            </div>
                            
                            <div className="bg-white border-2 border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex justify-between items-center mb-4">
                                    <div>
                                        <h4 className="font-bold text-gray-600 mb-1">æ•´é«”èª²ç¨‹æ¨è–¦åº¦</h4>
                                        <p className="text-xs text-gray-400">Q12 æ·¨æ¨è–¦å€¼</p>
                                    </div>
                                    <div className="text-3xl font-black text-green-600">
                                        {avgData.q12}
                                    </div>
                                </div>
                                <div className="pt-4 border-t border-gray-100">
                                    <p className="text-sm text-gray-600 leading-relaxed font-medium">
                                        <span className="text-green-600 font-bold">ğŸš€ æ•¸æ“šæ´å¯Ÿï¼š</span><br/>
                                        æ¥µé«˜çš„æ¨è–¦å€¼é¡¯ç¤ºèª²ç¨‹å…§å®¹åˆ‡ä¸­è³‡æ·± SP éœ€æ±‚ï¼Œä¸åƒ…éå›ºæ—¢æœ‰æŠ€èƒ½ï¼Œæ›´æˆåŠŸæ¿€ç™¼æŒçºŒç²¾é€²çš„å‹•åŠ›ï¼Œå»ºç«‹äº†å¼·å¤§çš„ç¤¾ç¾¤èªåŒæ„Ÿã€‚
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ChartSection = ({ data }) => {
            if (!isRechartsLoaded) return <div className="text-center p-10">åœ–è¡¨è¼‰å…¥ä¸­...</div>;

            const avgData = useMemo(() => {
                if (!data || data.length === 0) return null;
                const keys = ['q1','q2','q3','q4','q5','q6','q7','q8','q9','q10','q11','q12'];
                const sums = data.reduce((acc, curr) => {
                    keys.forEach(k => acc[k] = (acc[k] || 0) + (Number(curr[k]) || 0));
                    return acc;
                }, {});
                const result = {};
                keys.forEach(k => result[k] = (sums[k] / data.length).toFixed(1));
                return result;
            }, [data]);

            if (!avgData) return null;

            // é›·é”åœ–æ•¸æ“š (Q4-Q8)
            const radarData = [
                { subject: 'åŠ‡æœ¬æ ¡æº–(Q4)', A: parseFloat(avgData.q4), fullMark: 5 },
                { subject: 'æ¨™æº–ä¸€è‡´(Q5)', A: parseFloat(avgData.q5), fullMark: 5 },
                { subject: 'èº«å¿ƒèª¿é©(Q6)', A: parseFloat(avgData.q6), fullMark: 5 },
                { subject: 'å›é¥‹å®¢è§€(Q7)', A: parseFloat(avgData.q7), fullMark: 5 },
                { subject: 'å›é¥‹é‡é»(Q8)', A: parseFloat(avgData.q8), fullMark: 5 },
            ];

            // æ»¿æ„åº¦é•·æ¢åœ– (Admin vs Growth)
            const barData = [
                { name: 'è¡Œæ”¿å®‰æ’', value: parseFloat(avgData.q3) },
                { name: 'è¬›å¸«å°ˆæ¥­', value: parseFloat(avgData.q2) },
                { name: 'æŒ‡å°å½ˆæ€§', value: parseFloat(avgData.q9) },
                { name: 'æŒçºŒå‹•åŠ›', value: parseFloat(avgData.q11) },
                { name: 'æ¨è–¦ç¨‹åº¦', value: parseFloat(avgData.q12) },
            ];

            return (
                <div className="py-12 bg-gray-50 px-6">
                    <div className="max-w-7xl mx-auto">
                        <h2 className="text-3xl font-bold text-gray-800 mb-8 flex items-center">
                            <span className="w-2 h-10 bg-green-600 mr-4 rounded-full"></span>
                            é‡åŒ–æŒ‡æ¨™åˆ†æ
                        </h2>

                        <div className="grid md:grid-cols-2 gap-8">
                            {/* é›·é”åœ– */}
                            <div className="bg-white p-6 rounded-3xl shadow-lg border border-gray-100 relative overflow-hidden">
                                <div className="absolute top-0 right-0 p-4 opacity-5 pointer-events-none"><Target size={120} /></div>
                                <h3 className="text-lg font-bold text-gray-700 mb-2">å±•å»¶æ ¸å¿ƒèƒ½åŠ›åˆ†ä½ˆ</h3>
                                <p className="text-sm text-gray-400 mb-6">æª¢è¦–å„é …å°ˆæ¥­æŒ‡æ¨™çš„é”æˆç‹€æ³ (æ»¿åˆ†5åˆ†)</p>
                                <div className="h-80">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <RadarChart cx="50%" cy="50%" outerRadius="80%" data={radarData}>
                                            <PolarGrid stroke="#e5e7eb" />
                                            <PolarAngleAxis dataKey="subject" tick={{ fill: '#4b5563', fontSize: 13, fontWeight: 500 }} />
                                            <PolarRadiusAxis angle={30} domain={[0, 5]} tick={false} axisLine={false} />
                                            <Radar name="å¹³å‡å¾—åˆ†" dataKey="A" stroke="#059669" strokeWidth={3} fill="#059669" fillOpacity={0.2} />
                                            <Tooltip contentStyle={{borderRadius: '12px', border:'none', boxShadow:'0 4px 12px rgba(0,0,0,0.1)'}} />
                                        </RadarChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>

                            {/* é•·æ¢åœ– */}
                            <div className="bg-white p-6 rounded-3xl shadow-lg border border-gray-100 relative overflow-hidden">
                                <div className="absolute top-0 right-0 p-4 opacity-5 pointer-events-none"><TrendingUp size={120} /></div>
                                <h3 className="text-lg font-bold text-gray-700 mb-2">å„æ§‹é¢æ»¿æ„åº¦æ’è¡Œ</h3>
                                <p className="text-sm text-gray-400 mb-6">è¡Œæ”¿æ”¯æ´èˆ‡å­¸ç¿’æˆæ•ˆå°æ¯”</p>
                                <div className="h-80">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <BarChart data={barData} layout="vertical" margin={{ left: 40, right: 30, top: 10, bottom: 10 }}>
                                            <CartesianGrid strokeDasharray="3 3" horizontal={false} stroke="#f3f4f6" />
                                            <XAxis type="number" domain={[0, 5]} hide />
                                            <YAxis dataKey="name" type="category" width={80} tick={{fontSize: 14, fontWeight: 'bold', fill: '#374151'}} axisLine={false} tickLine={false} />
                                            <Tooltip cursor={{fill: 'transparent'}} contentStyle={{borderRadius: '12px'}} />
                                            <Bar dataKey="value" radius={[0, 20, 20, 0]} barSize={32}>
                                                {barData.map((entry, index) => (
                                                    <Cell key={`cell-${index}`} fill={index > 2 ? '#4F46E5' : '#F97316'} />
                                                ))}
                                            </Bar>
                                        </BarChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const VideoGallery = () => {
            const videos = [
                { id: '9vQZgOv_FHg', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒä¸€', isPrivate: true },
                { id: 'bE3w97q_bRc', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒäºŒ' },
                { id: 'B6yu1SwN1Aw', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒä¸‰' },
                { id: 'tcTnw86BA5Q', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒå››' },
                { id: 'abhevPchu58', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒäº”' },
                { id: 'gM2AYFJK78Y', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒå…­' },
                { id: '3zG_j6K0du4', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒä¸ƒ', isPrivate: true },
                { id: 'ivviMx-M6nw', title: 'å³èˆˆæ¼”ç·´ - æƒ…å¢ƒå…«' },
            ];

            const VideoCard = ({ video, index }) => {
                if (video.isPrivate) {
                    // ç§äººå½±ç‰‡æ”¹ç”¨é»æ“Šé–‹å•Ÿæ–¹å¼
                    return (
                        <a 
                            href={`https://youtu.be/${video.id}`}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="video-card group block"
                        >
                            <div className="video-thumbnail">
                                <div className="video-badge bg-orange-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                    </svg>
                                    ä¸å…¬é–‹
                                </div>
                                {/* YouTube ç¸®åœ– */}
                                <img 
                                    src={`https://img.youtube.com/vi/${video.id}/maxresdefault.jpg`}
                                    alt={video.title}
                                    className="absolute inset-0 w-full h-full object-cover"
                                    onError={(e) => {
                                        // è‹¥é«˜è§£æåº¦å¤±æ•—ï¼Œé™å›æ¨™æº–è§£æåº¦
                                        e.target.src = `https://img.youtube.com/vi/${video.id}/hqdefault.jpg`;
                                    }}
                                />
                                {/* æ’­æ”¾æŒ‰éˆ•è¦†è“‹å±¤ */}
                                <div className="absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-all">
                                    <div className="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform shadow-xl">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white">
                                            <polygon points="5 3 19 12 5 21 5 3"/>
                                        </svg>
                                    </div>
                                </div>
                                <div className="absolute bottom-3 left-3 bg-black/70 text-white px-2 py-1 rounded text-xs font-bold">
                                    é»æ“Šé–‹å•Ÿ YouTube
                                </div>
                            </div>
                            <div className="p-4">
                                <h3 className="font-bold text-gray-800 text-sm group-hover:text-purple-600 transition-colors flex items-center gap-2">
                                    <span className="text-purple-500 text-lg">#{index}</span>
                                    {video.title}
                                </h3>
                            </div>
                        </a>
                    );
                }

                // ä¸€èˆ¬å½±ç‰‡ä½¿ç”¨åµŒå…¥å¼æ’­æ”¾å™¨
                return (
                    <div className="video-card group">
                        <div className="video-thumbnail">
                            <div className="video-badge">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <circle cx="12" cy="12" r="10"/>
                                </svg>
                                LIVE
                            </div>
                            <iframe
                                src={`https://www.youtube.com/embed/${video.id}`}
                                title={video.title}
                                frameBorder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowFullScreen
                                loading="lazy"
                            ></iframe>
                        </div>
                        <div className="p-4">
                            <h3 className="font-bold text-gray-800 text-sm group-hover:text-purple-600 transition-colors flex items-center gap-2">
                                <span className="text-purple-500 text-lg">#{index}</span>
                                {video.title}
                            </h3>
                        </div>
                    </div>
                );
            };

            return (
                <div className="py-16 px-4 md:px-6 bg-gradient-to-b from-purple-50 via-white to-slate-50">
                    <div className="max-w-[1600px] mx-auto">
                        {/* æ¨™é¡Œå€ */}
                        <div className="text-center mb-12">
                            <div className="inline-flex items-center gap-3 bg-purple-100 px-6 py-3 rounded-full mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-purple-600">
                                    <polygon points="5 3 19 12 5 21 5 3"/>
                                </svg>
                                <span className="text-purple-700 font-bold text-sm tracking-wider">VIDEO HIGHLIGHTS</span>
                            </div>
                            <h2 className="text-4xl md:text-5xl font-black text-gray-800 mb-4">
                                è‡¨åºŠæŒ‘æˆ°<span className="text-purple-600">å³èˆˆæ¼”å‡º</span>
                            </h2>
                            <p className="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
                                é‡æº«ç•¶å¤©ç²¾å½©æ¼”ç·´æ™‚åˆ»ï¼Œçœ‹è¦‹å­¸å“¡å€‘å¦‚ä½•åœ¨æ¨¡æ“¬æƒ…å¢ƒä¸­å±•ç¾å°ˆæ¥­èˆ‡åŒç†å¿ƒ ğŸ¬
                            </p>
                        </div>

                        {/* ä¸Šæ’ 4 éƒ¨å½±ç‰‡ */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                            {videos.slice(0, 4).map((video, idx) => (
                                <VideoCard key={video.id} video={video} index={idx + 1} />
                            ))}
                        </div>

                        {/* ä¸‹æ’ 4 éƒ¨å½±ç‰‡ */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                            {videos.slice(4, 8).map((video, idx) => (
                                <VideoCard key={video.id} video={video} index={idx + 5} />
                            ))}
                        </div>

                        {/* åº•éƒ¨æç¤º */}
                        <div className="mt-10 text-center">
                            <div className="inline-flex items-center gap-2 bg-white px-6 py-3 rounded-full shadow-md border border-purple-100">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-purple-600">
                                    <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
                                    <path d="M12 16v-4"/>
                                    <path d="M12 8h.01"/>
                                </svg>
                                <span className="text-sm text-gray-600 font-medium">éƒ¨åˆ†å½±ç‰‡å› éš±ç§è¨­å®šéœ€é»æ“Šé–‹å•Ÿæ–°è¦–çª—è§€çœ‹ï½œå»ºè­°ä½¿ç”¨è€³æ©Ÿä»¥ç²å¾—æœ€ä½³é«”é©—</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const PhotoCarousel = () => {
            // ä½¿ç”¨ 1.jpg åˆ° 20.jpg
            const allPhotos = Array.from({ length: 20 }, (_, i) => `./2025images/${i + 1}.jpg`);
            const [lightboxImage, setLightboxImage] = useState(null);

            const handleDownload = (src) => {
                const link = document.createElement('a');
                link.href = src;
                link.download = src.split('/').pop();
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            return (
                <div className="py-12 px-4 md:px-6 bg-gradient-to-b from-white to-slate-50">
                    <div className="max-w-[1600px] mx-auto mb-6">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <div>
                                <h2 className="text-3xl font-bold text-gray-800 flex items-center mb-2">
                                    <span className="w-2 h-8 bg-blue-500 mr-3 rounded-full"></span>
                                    åŸ¹è¨“ç²¾å½©å´å¯«
                                </h2>
                                <p className="text-gray-500 text-sm ml-6">é»æ“Šç…§ç‰‡å¯æ”¾å¤§æª¢è¦–èˆ‡ä¸‹è¼‰</p>
                            </div>
                            <a 
                                href="https://drive.google.com/drive/folders/1UbvXfNu4Qj-qA1HQWLDTl16y71CpwDwP?usp=sharing"
                                target="_blank"
                                rel="noopener noreferrer"
                                className="group flex items-center gap-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-full font-bold shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:-translate-y-1"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="group-hover:scale-110 transition-transform">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                <span>æƒ³çœ‹æ›´å¤šç²¾å½©ç…§ç‰‡è«‹é»æˆ‘</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="group-hover:translate-x-1 transition-transform">
                                    <path d="M5 12h14"/>
                                    <path d="m12 5 7 7-7 7"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                    
                    {/* ç…§ç‰‡ç‰† - æ¸›å°‘ç•™ç™½ */}
                    <div className="max-w-[1600px] mx-auto">
                        <div className="photo-grid">
                            {allPhotos.map((src, i) => (
                                <div 
                                    key={i} 
                                    className="photo-item"
                                    onClick={() => setLightboxImage(src)}
                                >
                                    <img src={src} alt={`åŸ¹è¨“ç…§ç‰‡ ${i + 1}`} loading="lazy" />
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    {/* ç‡ˆç®± */}
                    {lightboxImage && (
                        <div className="lightbox-overlay" onClick={() => setLightboxImage(null)}>
                            <div className="lightbox-controls">
                                <button 
                                    className="lightbox-btn"
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        handleDownload(lightboxImage);
                                    }}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                    ä¸‹è¼‰
                                </button>
                                <button 
                                    className="lightbox-btn"
                                    onClick={() => setLightboxImage(null)}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"/>
                                        <line x1="6" y1="6" x2="18" y2="18"/>
                                    </svg>
                                    é—œé–‰
                                </button>
                            </div>
                            <img 
                                src={lightboxImage} 
                                className="lightbox-image" 
                                alt="æ”¾å¤§æª¢è¦–" 
                                onClick={(e) => e.stopPropagation()}
                            />
                        </div>
                    )}
                </div>
            );
        };

        const ChargingStation = () => {
            const [lightboxImage, setLightboxImage] = useState(null);
            
            return (
                <>
                    <div className="py-20 px-4 md:px-6 bg-gradient-to-b from-slate-50 via-amber-50/30 to-white">
                        <div className="max-w-[1400px] mx-auto">
                            <div className="text-center mb-10">
                                <h2 className="text-5xl md:text-6xl font-black text-gray-800 mb-4 flex items-center justify-center">
                                    <Sparkles className="mr-4 text-yellow-500" size={48} />
                                    èª²å¾Œèƒ½é‡å……é›»ç«™
                                </h2>
                                <p className="text-2xl md:text-3xl font-bold text-green-600 tracking-wide">
                                    å¥‡ç¾ SP è®šåˆ°çˆ†ï¼Œé›»ç«è²¼æ»¿åŠ›é‡åˆ° âš¡
                                </p>
                            </div>
                            
                            <div 
                                className="relative rounded-3xl overflow-hidden shadow-2xl border-8 border-yellow-400 cursor-pointer hover:scale-[1.01] transition-all duration-300 hover:shadow-3xl"
                                onClick={() => setLightboxImage('./last.png')}
                            >
                                <img 
                                    src="./last.png" 
                                    alt="å­¸å“¡å……é›»æ¨" 
                                    className="w-full h-auto"
                                    loading="lazy"
                                />
                                <div className="absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent pointer-events-none"></div>
                                
                                {/* æ”¾å¤§æç¤º - æ›´é†’ç›® */}
                                <div className="absolute bottom-8 right-8 bg-white/95 backdrop-blur-md px-6 py-3 rounded-full text-base font-bold text-gray-700 flex items-center gap-3 shadow-xl border-2 border-yellow-400 hover:bg-yellow-50 transition-all">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <circle cx="11" cy="11" r="8"/>
                                        <path d="m21 21-4.3-4.3"/>
                                    </svg>
                                    <span>é»æ“Šæ”¾å¤§æŸ¥çœ‹</span>
                                </div>
                                
                                {/* è£é£¾æ€§å…‰æšˆæ•ˆæœ */}
                                <div className="absolute top-10 left-10 w-32 h-32 bg-yellow-300/20 rounded-full blur-3xl pointer-events-none"></div>
                                <div className="absolute bottom-10 right-10 w-40 h-40 bg-green-300/20 rounded-full blur-3xl pointer-events-none"></div>
                            </div>
                            
                            {/* è£œå……èªªæ˜æ–‡å­— */}
                            <div className="text-center mt-8 max-w-3xl mx-auto">
                                <p className="text-gray-600 text-lg leading-relaxed">
                                    å­¸å“¡å€‘åœ¨èª²ç¨‹çµæŸå¾Œï¼Œå°‡è‡ªå·±çš„æ”¶ç©«ã€æ„Ÿå‹•èˆ‡æœŸè¨±åŒ–ç‚ºä¸€å¼µå¼µèƒ½é‡ä¾¿åˆ©è²¼ï¼Œ
                                    <span className="font-bold text-green-600">é»äº®å½¼æ­¤çš„å­¸ç¿’ä¹‹è·¯</span>ï¼Œ
                                    æˆç‚ºæŒçºŒå‰é€²çš„å‹•åŠ›ä¾†æº ğŸ’ª
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    {/* ç‡ˆç®± */}
                    {lightboxImage && (
                        <div className="lightbox-overlay" onClick={() => setLightboxImage(null)}>
                            <div className="lightbox-controls">
                                <button 
                                    className="lightbox-btn"
                                    onClick={() => setLightboxImage(null)}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <line x1="18" y1="6" x2="6" y2="18"/>
                                        <line x1="6" y1="6" x2="18" y2="18"/>
                                    </svg>
                                    é—œé–‰
                                </button>
                            </div>
                            <img 
                                src={lightboxImage} 
                                className="lightbox-image" 
                                alt="å……é›»æ¨æ”¾å¤§æª¢è¦–" 
                                onClick={(e) => e.stopPropagation()}
                            />
                        </div>
                    )}
                </>
            );
        };

        const WallSection = ({ data }) => {
            const [tab, setTab] = useState('helpful'); // helpful (Q13) or future (Q14)
            
            // éš¨æ©Ÿæ¨£å¼ç”¢ç”Ÿå™¨
            const getNoteStyle = (index) => {
                const rotations = ['rotate-1', '-rotate-2', 'rotate-3', '-rotate-1', 'rotate-2'];
                const colors = [
                    'bg-yellow-100 text-yellow-900 border-yellow-200', 
                    'bg-green-100 text-green-900 border-green-200',
                    'bg-blue-100 text-blue-900 border-blue-200',
                    'bg-pink-100 text-pink-900 border-pink-200'
                ];
                return { rotation: rotations[index % 5], color: colors[index % 4] };
            };

            return (
                <div className="py-16 px-6 relative overflow-hidden" style={{backgroundColor: '#1e293b'}}>
                    <div className="max-w-6xl mx-auto relative z-10">
                        <div className="flex flex-col md:flex-row justify-between items-center mb-12">
                            <h2 className="text-3xl font-bold text-white flex items-center mb-4 md:mb-0">
                                <Quote className="mr-3 text-green-400" />
                                å­¸å“¡å¿ƒè²å›é¥‹ç‰†
                            </h2>
                            <div className="bg-white/10 p-1 rounded-full backdrop-blur-sm border border-white/20">
                                <button onClick={() => setTab('helpful')} className={`px-6 py-2 rounded-full text-sm font-medium transition-all ${tab === 'helpful' ? 'bg-green-500 text-white shadow-lg' : 'text-green-100 hover:text-white'}`}>
                                    æ”¶ç©«æœ€å¤š (Q13)
                                </button>
                                <button onClick={() => setTab('future')} className={`px-6 py-2 rounded-full text-sm font-medium transition-all ${tab === 'future' ? 'bg-green-500 text-white shadow-lg' : 'text-green-100 hover:text-white'}`}>
                                    æœŸæœ›ä¸»é¡Œ (Q14)
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
                            {data.map((item, index) => {
                                const content = tab === 'helpful' ? item.q13 : item.q14;
                                if (!content || content.length < 2) return null;
                                const style = getNoteStyle(index);
                                return (
                                    <div key={index} className={`transform ${style.rotation} hover:scale-105 hover:rotate-0 transition-all duration-300`}>
                                        <div className={`${style.color} p-6 h-60 shadow-xl flex flex-col relative rounded-sm`}>
                                            <div className="absolute -top-3 left-1/2 -translate-x-1/2 w-12 h-6 bg-white/30 backdrop-blur-sm rotate-1 shadow-sm"></div>
                                            <p className="font-handwriting text-xl leading-relaxed flex-grow overflow-y-auto custom-scrollbar">
                                                {content}
                                            </p>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const Dashboard = () => {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);

            // === æ¨¡æ“¬æ•¸æ“šç”¢ç”Ÿå™¨ (è‹¥ç„¡çœŸå¯¦ API å¯ç”¨æ­¤æ¸¬è©¦) ===
            const generateMockData = () => {
                return Array.from({ length: 16 }, (_, i) => ({
                    id: i + 1,
                    q1: (4 + Math.random()).toFixed(0), // ç›®æ¨™æ˜ç¢º
                    q2: 5, // è¬›å¸«å°ˆæ¥­
                    q3: (4 + Math.random()).toFixed(0), // è¡Œæ”¿
                    q4: (3.8 + Math.random() * 1.2).toFixed(1), // åŠ‡æœ¬æ ¡æº–
                    q5: (4 + Math.random()).toFixed(1), // æ¨™æº–åŒ–
                    q6: (4.2 + Math.random() * 0.8).toFixed(1), // èº«å¿ƒèª¿é©
                    q7: (3.5 + Math.random() * 1.5).toFixed(1), // å›é¥‹å®¢è§€
                    q8: (3.8 + Math.random() * 1.2).toFixed(1), // å›é¥‹é‡é»
                    q9: 5, // æ¥å—æŒ‡å°
                    q10: 5, // è§’è‰²èªåŒ
                    q11: (4.5 + Math.random() * 0.5).toFixed(1), // å­¸ç¿’å‹•åŠ›
                    q12: 5, // æ¨è–¦åº¦
                    q13: ["é‡æ–°æª¢è¦–åŠ‡æœ¬ç´°ç¯€ï¼Œç™¼ç¾å¾ˆå¤šä»¥å‰æ²’æ³¨æ„çš„ç›²é»ã€‚", "å›é¥‹æŠ€å·§çš„æ¼”ç·´å¾ˆæœ‰å¹«åŠ©ï¼Œç‰¹åˆ¥æ˜¯å€åˆ†äº‹å¯¦èˆ‡è§€é»ã€‚", "è¬›å¸«çš„å¼•å°å¾ˆæº«æš–ï¼Œè®“æˆ‘æ›´é¡˜æ„æ¥å—ä¿®æ­£ã€‚", "èƒ½è·Ÿè³‡æ·±å¤¥ä¼´ä¸€èµ·äº¤æµæ˜¯æœ€æ£’çš„ã€‚"][i % 4],
                    q14: ["å¸Œæœ›å¢åŠ å›°é›£è€ƒç”Ÿçš„æ‡‰å°èª²ç¨‹ã€‚", "é—œæ–¼æƒ…ç·’å¼µåŠ›çš„æ‹¿æå¯ä»¥å†å¤šä¸€é»ç·´ç¿’ã€‚", "æƒ³äº†è§£æ›´å¤šä¸åŒç§‘åˆ¥çš„åŠ‡æœ¬ã€‚", "æ²’æœ‰å»ºè­°ï¼Œå¾ˆæ£’çš„èª²ç¨‹ï¼"][i % 4],
                    q15: "è¬è¬ä¸»è¾¦å–®ä½çš„ç”¨å¿ƒï¼"
                }));
            };

            // è¨­å®šç‚º true ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šï¼Œfalse å‰‡å˜—è©¦é€£ç·š GAS
            const useMockData = false; 
            const GAS_URL = 'https://script.google.com/macros/s/AKfycbyOmNPZoMINGkoZwFJLP6LT0kM7ZwS3Lbt9B_nEuYO2tUH74MTWjBZQAMpS0PSKTQu4/exec'; 

            useEffect(() => {
                if (useMockData) {
                    setTimeout(() => {
                        setData(generateMockData());
                        setLoading(false);
                    }, 800);
                } else {
                    fetch(GAS_URL)
                        .then(res => res.json())
                        .then(json => { setData(json); setLoading(false); })
                        .catch(err => console.error("Fetch error:", err));
                }
            }, []);

            if (loading) return (
                <div className="min-h-screen flex flex-col items-center justify-center bg-slate-900 text-green-400">
                    <Loader2 className="w-12 h-12 animate-spin mb-4" />
                    <p className="text-lg font-medium tracking-widest">æ•¸æ“šåˆ†æä¸­...</p>
                </div>
            );

            // è¨ˆç®—å¹³å‡å€¼ä¾› Insight ä½¿ç”¨
            const avgData = {
                q1: (data.reduce((s, c) => s + Number(c.q1), 0) / data.length).toFixed(1),
                q2: (data.reduce((s, c) => s + Number(c.q2), 0) / data.length).toFixed(1),
                q3: (data.reduce((s, c) => s + Number(c.q3), 0) / data.length).toFixed(1),
                q4: (data.reduce((s, c) => s + Number(c.q4), 0) / data.length).toFixed(1),
                q5: (data.reduce((s, c) => s + Number(c.q5), 0) / data.length).toFixed(1),
                q6: (data.reduce((s, c) => s + Number(c.q6), 0) / data.length).toFixed(1),
                q7: (data.reduce((s, c) => s + Number(c.q7), 0) / data.length).toFixed(1),
                q8: (data.reduce((s, c) => s + Number(c.q8), 0) / data.length).toFixed(1),
                q9: (data.reduce((s, c) => s + Number(c.q9), 0) / data.length).toFixed(1),
                q10: (data.reduce((s, c) => s + Number(c.q10), 0) / data.length).toFixed(1),
                q11: (data.reduce((s, c) => s + Number(c.q11), 0) / data.length).toFixed(1),
                q12: (data.reduce((s, c) => s + Number(c.q12), 0) / data.length).toFixed(1),
            };

            return (
                <div className="min-h-screen bg-white font-sans selection:bg-green-200">
                    <Header count={data.length} />
                    <InsightsSection avgData={avgData} />
                    <ChartSection data={data} />
                    <VideoGallery />
                    <PhotoCarousel />
                    <ChargingStation />
                    <WallSection data={data} />
                    <footer className="bg-slate-900 text-gray-500 py-8 text-center text-sm border-t border-white/5">
                        <p>Â© 2025 | å¥‡ç¾é†«é™¢ æ¨™æº–åŒ–ç—…äººå±•å»¶åŸ¹è¨“å·¥ä½œåŠ</p>
                        <p className="text-xs mt-1 text-gray-600">æ•¸æ“šä¾†æºï¼šGoogle Sheet å³æ™‚é€£å‹•</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Dashboard />);
    </script>
</body>
</html>
